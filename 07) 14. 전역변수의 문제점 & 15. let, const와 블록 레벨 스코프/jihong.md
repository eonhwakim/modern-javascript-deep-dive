# 14. 전역변수의 문제점 & 15. let, const와 블록 레벨 스코프

## 14. 전역변수의 문제점 

전역변수의 무분별한 사용은 위험하다. 
전역변수를 반드시 사용해야 할 이유를 찾지 못한다면 지역변수를 사용해야 한다.

### 지역변수와 전역변수의 생명주기

변수가 생성되고 소멸되는 과정을 생명주기라고 한다. 이러한 생명주기는 레거시한 메모리 공간낭비를 줄이기 위해 필요하다.

변수는 자신이 선언된 위치에서 생성되고 소멸한다.

전역변수의 생명주기는 애플리케이션의 생명주기와 같지만, 지역변수의 생명주기는 함수의 생명주기와 같다.

1. 지역변수의 생명주기

```javascript
function foo() {
  var x = 'local';
  console.log(x);`
}
foo();
console.log(x);
```
지역변수 x는 함수가 호출되기 이전까지는 생성되지 않는다. 
일반적으로 알고있는 변수 선언은 선언문이 어디에 있든 상관없이 런타임이전에 자바스크립트 엔진에 의해 먼저 실행된다. 
그런데 엄밀히 말하면 이것은 전역변수에 한정된 것으로, 함수 내부에 선언된 지역변수 x는 foo 함수가 호출되어 실행되는 동안에만 유효하다.
즉 지역변수의 생명주기는 함수의 생명주기와 일치한다.

2. 전역변수의 생명주기

전역 코드는 코드가 로드되자마자 곧바로 해석되고 실행되고, 마지막 문이 실행되면 종료된다.





📍

자바스크립트 엔진은 소스코드의 평가, 소스코드의 실행 이라는 2개의 과정으로 나누어 처리한다. 

```javascript
var x;
x = 1;
```
